<html>
	<head>

	</head>

	<body>
		<h1>Chat</h1>
		<ul id="messages">
		</ul>
		<br/>
		<br/>
		<input type="input" id="textBox"/>
		<button onClick="sendMessage()">Send message</button>
		<button onClick="alert('Not implemented')">Upload</button>

		<script type="text/javascript">
			const initialMessages = {{InitialMessages}};
			for (var i = 0; i < initialMessages.length; i++)
			{
				visualizeMessageCS(initialMessages[i]);
			}

			async function visualizeMessageCS(message)
			{
				const list = document.getElementById("messages");
				const div = document.createElement("div");

				if (message.Type == "Text")
				{
					div.append("" + message.Author + ": " + message.Content);
				}
				else if (message.Type == "File")
				{
					var downloadBtn = document.createElement("button");
					button.append(message.Content);
				}
				else
				{
					div.append("Invalid message type");
				}

				const li = document.createElement("li");
				li.append(div);
				list.append(li);
				list.append(document.createElement("br"));
			}

			async function sendMessage()
			{
				const textbox = document.getElementById("textBox");
				await context.sendMessage(textbox.value, "Text");
				textbox.value = "";
			}
		</script>
	</body>
</html>