<html>
	<head>

	</head>

	<body>
		<h1>Chat</h1>
		<ul id="messages">
		</ul>
		<br/>
		<br/>
		<input type="input" id="textBox"/>
		<button onClick="sendMessage()">Send message</button>

		<script type="text/javascript">
			const initialMessages = {{InitialMessages}};
			for (var i = 0; i < initialMessages.length; i++)
			{
				visualizeMessageCS(initialMessages[i]);
			}

			async function visualizeMessageCS(message)
			{
				const list = document.getElementById("messages");
				const li = document.createElement("li");
				const div = document.createElement("div");
				const br = document.createElement("br");

				div.append("||" + message.Type + "|| " + message.Author + ": " + message.Content);

				li.append(div);
				list.append(li);
				list.append(br);
			}

			async function sendMessage()
			{
				const textbox = document.getElementById("textBox");
				await context.sendMessage(null, textbox.value, 0);
				visualizeMessageCS({Author: "You", Content: textbox.value, Type: 0});
				textbox.value = "";
			}
		</script>
	</body>
</html>